package anylayout.extras;

import anylayout.Constraint;
import anylayout.LayoutContext;
import fpeas.function.Function;

import java.awt.Component;

public final class ConstraintBuilder
{
	public static ConstraintBuilderStage3 buildWithSameLeftAsTop(final Function<LayoutContext, Integer> leftAndTop)
	{
		return buildConstraint().setLeft(leftAndTop).setTop(leftAndTop);
	}

	public static ConstraintBuilderStage1 buildConstraint()
	{
		return new ConstraintBuilderStage1()
		{
			public ConstraintBuilderStage2 setLeft(final Function<? super LayoutContext, Integer> left)
			{
				return new ConstraintBuilderStage2()
				{
					public ConstraintBuilderStage3 setTop(final Function<? super LayoutContext, Integer> top)
					{
						return new ConstraintBuilderStage3()
						{
							public ConstraintBuilderStage4 setWidth(final Function<LayoutContext, Integer> width)
							{
								return new ConstraintBuilderStage4()
								{
									public Constraint setHeight(final Function<LayoutContext, Integer> height)
									{
										return new Constraint()
										{
											public Function<? super LayoutContext, Integer> getLeft()
											{
												return left;
											}

											public Function<? super LayoutContext, Integer> getTop()
											{
												return top;
											}

											public Function<? super LayoutContext, Integer> getWidth()
											{
												return width;
											}

											public Function<? super LayoutContext, Integer> getHeight()
											{
												return height;
											}
										};
									}
								};
							}
						};
					}
				};
			}
		};
	}

	public static final Function<LayoutContext, Integer> preferredSize=new Function<LayoutContext, Integer>()
	{
		public Integer run(final LayoutContext layoutContext)
		{
			return layoutContext.getPreferredSize();
		}
	};

	public static Function<LayoutContext, Integer> fill()
	{
		return new Function<LayoutContext, Integer>()
		{
			public Integer run(final LayoutContext key)
			{
				return key.getParentSize();
			}
		};
	}

	public static <T> Function<T, Integer> minimum(final Function<? super T,Integer> one, final Function<? super T,Integer> two)
	{
		return new Function<T, Integer>()
		{
			public Integer run(final T input)
			{
				return Math.min(one.run(input),two.run(input));
			}
		};
	}

	public static Function<LayoutContext, Integer> after(final Component component)
	{
		return new Function<LayoutContext, Integer>()
		{
			public Integer run(final LayoutContext layoutContext)
			{
				return layoutContext.getLayoutInfo(component).getFarOffset();
			}
		};
	}
}